!function(angular){function visualizarInstalacaoController($scope,$http,$rootScope,$location,$filter,$window,$cookieStore,ngNotify){function ConsultarInstalacoes(){console.log("buscaCliente : "+$scope.buscaCliente),console.log("buscaCliente : "+$scope.buscaData);var loggedIn=$cookieStore.get("globals");$http({url:"/api/v1/visualizacao/consultarInstalacao",method:"POST",data:{buscaCliente:$scope.buscaCliente,userId:3==loggedIn.currentUser.profile?loggedIn.currentUser.userId:"",filtrarCancelada:3==loggedIn.currentUser.profile,filtrarData:$scope.buscaData,filtrarHoje:3==loggedIn.currentUser.profile}}).then(function(result){$scope.instalacoes=result.data.data,console.log($scope.instalacoes.length);for(var i=0;i<$scope.instalacoes.length;i++)console.log($scope.instalacoes[i].data_agendamento),$scope.instalacoes[i].data_agendamento=null!=$scope.instalacoes[i].data_agendamento?$filter("date")($scope.instalacoes[i].data_agendamento,"dd/MM/yyyy"):"";console.log($scope.instalacoes)},function(err){return console.log(err),ngNotify.set(err.data.msg)})}function InicializaMenu(){function Logout(){ClearCredentials(),$window.location.href="/login.html"}function ClearCredentials(){$rootScope.globals={},$cookieStore.remove("globals"),$http.defaults.headers.common.Authorization="Basic"}var loggedIn=$cookieStore.get("globals");console.log(loggedIn),"undefined"==typeof loggedIn?(console.log("não logado"),$scope.profilePermission=0,$scope.exibeMenu=!1,$scope.logged=!1,$window.location.href="/login.html"):(console.log("logado"),$scope.profilePermission=loggedIn.currentUser.profile,$scope.exibeMenu=!0,$scope.logged=!0),$scope.logout=Logout}function Excluir(idAgendamento){console.log(idAgendamento),$http({url:"/api/v1/visualizacao/excluirAgendamento",method:"POST",data:{idAgendamento:idAgendamento}}).then(function(result){return console.log(result),ConsultarInstalacoes(),ngNotify.set("Instalacao Excluida com Sucesso")},function(err){return ngNotify.set(err.data.msg)})}function EditarAgendamento(IdAgendamento){console.log(IdAgendamento),$http({url:"/api/v1/visualizacao/CarregaAgendamento",method:"POST",data:{idAgendamento:IdAgendamento}}).then(function(result){"undefined"!=typeof result.data&&result.data.data.length>0&&(console.log(result.data.data[0]),$scope.agendamentoEdicao=result.data.data[0],$scope.agendamentoEdicao.tecnicos=[],$http({url:"/api/v1/agendamento/listarTecnicos",method:"GET"}).then(function(result){$scope.agendamentoEdicao.tecnicos=result.data.data},function(err){console.log(err)}),"string"==typeof $scope.agendamentoEdicao.data_agendamento&&($scope.agendamentoEdicao.data_agendamento=new Date($scope.agendamentoEdicao.data_agendamento)),"string"==typeof $scope.agendamentoEdicao.data_vencimento&&($scope.agendamentoEdicao.data_vencimento=new Date($scope.agendamentoEdicao.data_vencimento)),$scope.agendamentoEdicao.tecnico_id=$scope.agendamentoEdicao.tecnico_id.toString(),$scope.agendamentoEdicao.periodo=$scope.agendamentoEdicao.periodo.toString(),$scope.agendamentoEdicao.statusagendamento=$scope.agendamentoEdicao.statusagendamento.toString())},function(err){return ngNotify.set(err.data.msg)})}function SalvarEdicaoAgendamento(){console.log($scope.agendamentoEdicao),$http({url:"/api/v1/visualizacao/atualizarAgendamento",method:"POST",data:{agendamento:$scope.agendamentoEdicao}}).then(function(result){return console.log(result),ConsultarInstalacoes(),ngNotify.set(result.data.msg)},function(err){return ngNotify.set(err.data.msg)})}$scope.instalacoes=[],$scope.ConsultarInstalacoes=ConsultarInstalacoes,InicializaMenu(),ConsultarInstalacoes(),$scope.Excluir=Excluir,$scope.EditarAgendamento=EditarAgendamento,$scope.SalvarEdicaoAgendamento=SalvarEdicaoAgendamento}function visualizarControleInstalacaoController($scope,$http,$rootScope,$location,$filter,$window,$cookieStore,ngNotify){function ConsultarInstalacoes(){console.log("buscaCliente : "+$scope.buscaCliente),console.log("buscaCliente : "+$scope.buscaData);var loggedIn=$cookieStore.get("globals");$http({url:"/api/v1/visualizacao/consultarInstalacao",method:"POST",data:{buscaCliente:$scope.buscaCliente,userId:3==loggedIn.currentUser.profile?loggedIn.currentUser.userId:"",filtrarCancelada:3==loggedIn.currentUser.profile,filtrarData:$scope.buscaData,filtrarHoje:"undefined"==typeof $scope.buscaData||""==$scope.buscaData||null==$scope.buscaData}}).then(function(result){$scope.instalacoes=result.data.data,console.log($scope.instalacoes.length);for(var i=0;i<$scope.instalacoes.length;i++)console.log($scope.instalacoes[i].data_agendamento),$scope.instalacoes[i].data_agendamento=null!=$scope.instalacoes[i].data_agendamento?$filter("date")($scope.instalacoes[i].data_agendamento,"dd/MM/yyyy"):"";console.log($scope.instalacoes)},function(err){return console.log(err),ngNotify.set(err.data.msg)})}function InicializaMenu(){function Logout(){ClearCredentials(),$window.location.href="/login.html"}function ClearCredentials(){$rootScope.globals={},$cookieStore.remove("globals"),$http.defaults.headers.common.Authorization="Basic"}var loggedIn=$cookieStore.get("globals");console.log(loggedIn),"undefined"==typeof loggedIn?(console.log("não logado"),$scope.profilePermission=0,$scope.exibeMenu=!1,$scope.logged=!1,$window.location.href="/login.html"):(console.log("logado"),$scope.profilePermission=loggedIn.currentUser.profile,$scope.exibeMenu=!0,$scope.logged=!0),$scope.logout=Logout}function Excluir(idAgendamento){console.log(idAgendamento),$http({url:"/api/v1/visualizacao/excluirAgendamento",method:"POST",data:{idAgendamento:idAgendamento}}).then(function(result){return console.log(result),ConsultarInstalacoes(),ngNotify.set("Instalacao Excluida com Sucesso")},function(err){return ngNotify.set(err.data.msg)})}function EditarAgendamento(IdAgendamento){console.log(IdAgendamento),$http({url:"/api/v1/visualizacao/CarregaAgendamento",method:"POST",data:{idAgendamento:IdAgendamento}}).then(function(result){"undefined"!=typeof result.data&&result.data.data.length>0&&(console.log(result.data.data[0]),$scope.agendamentoEdicao=result.data.data[0],$scope.agendamentoEdicao.tecnicos=[],$http({url:"/api/v1/agendamento/listarTecnicos",method:"GET"}).then(function(result){$scope.agendamentoEdicao.tecnicos=result.data.data},function(err){console.log(err)}),"string"==typeof $scope.agendamentoEdicao.data_agendamento&&($scope.agendamentoEdicao.data_agendamento=new Date($scope.agendamentoEdicao.data_agendamento)),"string"==typeof $scope.agendamentoEdicao.data_vencimento&&($scope.agendamentoEdicao.data_vencimento=new Date($scope.agendamentoEdicao.data_vencimento)),$scope.agendamentoEdicao.tecnico_id=$scope.agendamentoEdicao.tecnico_id.toString(),$scope.agendamentoEdicao.periodo=$scope.agendamentoEdicao.periodo.toString(),$scope.agendamentoEdicao.statusagendamento=$scope.agendamentoEdicao.statusagendamento.toString())},function(err){return ngNotify.set(err.data.msg)})}function SalvarEdicaoAgendamento(){console.log($scope.agendamentoEdicao),$http({url:"/api/v1/visualizacao/atualizarAgendamento",method:"POST",data:{agendamento:$scope.agendamentoEdicao}}).then(function(result){return console.log(result),ConsultarInstalacoes(),ngNotify.set(result.data.msg)},function(err){return ngNotify.set(err.data.msg)})}$scope.instalacoes=[],$scope.ConsultarInstalacoes=ConsultarInstalacoes,InicializaMenu(),ConsultarInstalacoes(),$scope.Excluir=Excluir,$scope.EditarAgendamento=EditarAgendamento,$scope.SalvarEdicaoAgendamento=SalvarEdicaoAgendamento}function visualizarManutencaoController($scope,$http,$rootScope,$location,$filter,$window,$cookieStore,ngNotify){function ConsultarManutencoes(){console.log("buscaCliente : "+$scope.buscaCliente);var loggedIn=$cookieStore.get("globals"),userId=3==loggedIn.currentUser.profile?loggedIn.currentUser.userId:"",filtrarCancelada=3==loggedIn.currentUser.profile;$http({url:"/api/v1/visualizacao/consultarManutencoes",method:"POST",data:{buscaCliente:$scope.buscaCliente,userId:userId,filtrarCancelada:filtrarCancelada,filtrarHoje:3==loggedIn.currentUser.profile}}).then(function(result){$scope.manutencoes=result.data.data,console.log($scope.manutencoes.length);for(var i=0;i<$scope.manutencoes.length;i++)console.log($scope.manutencoes[i].data_agendamento),$scope.manutencoes[i].data_agendamento=null!=$scope.manutencoes[i].data_agendamento?$filter("date")($scope.manutencoes[i].data_agendamento,"dd/MM/yyyy"):"";console.log($scope.manutencoes)},function(err){return console.log(err),ngNotify.set(err.data.msg)})}function InicializaMenu(loggedIn){function Logout(){ClearCredentials(),$window.location.href="/login.html"}function ClearCredentials(){$rootScope.globals={},$cookieStore.remove("globals"),$http.defaults.headers.common.Authorization="Basic"}var loggedIn=$cookieStore.get("globals");console.log(loggedIn),"undefined"==typeof loggedIn?(console.log("não logado"),$scope.profilePermission=0,$scope.exibeMenu=!1,$scope.logged=!1,$window.location.href="/login.html"):(console.log("logado"),$scope.profilePermission=loggedIn.currentUser.profile,$scope.exibeMenu=!0,$scope.logged=!0),$scope.logout=Logout}function Excluir(idAgendamento){console.log(idAgendamento),$http({url:"/api/v1/visualizacao/excluirAgendamento",method:"POST",data:{idAgendamento:idAgendamento}}).then(function(result){return console.log(result),ConsultarManutencoes(),ngNotify.set("Instalacao Excluida com Sucesso")},function(err){return ngNotify.set(err.data.msg)})}function EditarAgendamento(IdAgendamento){console.log(IdAgendamento),$http({url:"/api/v1/visualizacao/CarregaAgendamento",method:"POST",data:{idAgendamento:IdAgendamento}}).then(function(result){"undefined"!=typeof result.data&&result.data.data.length>0&&(console.log(result.data.data[0]),$scope.agendamentoEdicao=result.data.data[0],$scope.agendamentoEdicao.tecnicos=[],$http({url:"/api/v1/agendamento/listarTecnicos",method:"GET"}).then(function(result){$scope.agendamentoEdicao.tecnicos=result.data.data},function(err){console.log(err)}),"string"==typeof $scope.agendamentoEdicao.data_agendamento&&($scope.agendamentoEdicao.data_agendamento=new Date($scope.agendamentoEdicao.data_agendamento)),"string"==typeof $scope.agendamentoEdicao.data_vencimento&&($scope.agendamentoEdicao.data_vencimento=new Date($scope.agendamentoEdicao.data_vencimento)),$scope.agendamentoEdicao.tecnico_id=$scope.agendamentoEdicao.tecnico_id.toString(),$scope.agendamentoEdicao.statusagendamento=$scope.agendamentoEdicao.statusagendamento.toString())},function(err){return ngNotify.set(err.data.msg)})}function SalvarEdicaoAgendamento(){console.log($scope.agendamentoEdicao),$http({url:"/api/v1/visualizacao/atualizarAgendamento",method:"POST",data:{agendamento:$scope.agendamentoEdicao}}).then(function(result){return console.log(result),ConsultarManutencoes(),ngNotify.set(result.data.msg)},function(err){return ngNotify.set(err.data.msg)})}$scope.manutencoes=[],$scope.ConsultarManutencoes=ConsultarManutencoes,InicializaMenu(),ConsultarManutencoes(),$scope.Excluir=Excluir,$scope.EditarAgendamento=EditarAgendamento,$scope.SalvarEdicaoAgendamento=SalvarEdicaoAgendamento}angular.module("visualizacao").controller("visualizarManutencaoController",visualizarManutencaoController),angular.module("visualizacao").controller("visualizarInstalacaoController",visualizarInstalacaoController),angular.module("visualizacao").controller("visualizarControleInstalacaoController",visualizarControleInstalacaoController)}(angular);