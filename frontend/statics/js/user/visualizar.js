!function(angular){function visualizarUsuarioController($scope,$http,$rootScope,$location,$filter,$window,$cookieStore,ngNotify){function ConsultarUsuarios(){console.log("buscaUsuario : "+$scope.buscaUsuario);$cookieStore.get("globals");$http({url:"/api/v1/user/consultarUsuarios",method:"POST",data:{buscaUsuario:$scope.buscaUsuario}}).then(function(result){$scope.usuarios=result.data.data,console.log($scope.usuarios.length),console.log($scope.usuarios)},function(err){return console.log(err),ngNotify.set(err.data.msg)})}function InicializaMenu(){function Logout(){ClearCredentials(),$window.location.href="/login.html"}function ClearCredentials(){$rootScope.globals={},$cookieStore.remove("globals"),$http.defaults.headers.common.Authorization="Basic"}var loggedIn=$cookieStore.get("globals");console.log(loggedIn),"undefined"==typeof loggedIn?(console.log("nÃ£o logado"),$scope.profilePermission=0,$scope.exibeMenu=!1,$scope.logged=!1,$window.location.href="/login.html"):(console.log("logado"),$scope.profilePermission=loggedIn.currentUser.profile,$scope.exibeMenu=!0,$scope.logged=!0),$scope.logout=Logout}function Excluir(idUsuario){console.log(idUsuario),$http({url:"/api/v1/user/excluirUsuario",method:"POST",data:{idUsuario:idUsuario}}).then(function(result){return console.log(result),ConsultarUsuarios(),ngNotify.set("Usuario Excluido com Sucesso")},function(err){return ngNotify.set(err.data.msg)})}function Editar(idUsuario){InicializarUsuarioEdicao(),console.log(idUsuario),$http({url:"/api/v1/user/CarregaUsuario",method:"POST",data:{idUsuario:idUsuario}}).then(function(result){"undefined"!=typeof result.data&&result.data.data.length>0&&(console.log(result.data.data[0]),$scope.usuarioEdicao=result.data.data[0],$scope.usuarioEdicao.perfis=[],$scope.usuarioEdicao.profile_id=$scope.usuarioEdicao.profile_id.toString(),$http({url:"/api/v1/user/listarPerfis",method:"GET"}).then(function(result){$scope.usuarioEdicao.perfis=result.data.data,console.log($scope.usuarioEdicao.perfis)},function(err){console.log(err)}))},function(err){return ngNotify.set(err.data.msg)})}function InicializarUsuarioEdicao(){console.log("inicializar objetos"),$scope.usuarioEdicao.id="",$scope.usuarioEdicao.nome="",$scope.usuarioEdicao.email="",$scope.usuarioEdicao.perfil="",$scope.usuarioEdicao.telefone="",$scope.usuarioEdicao.cidade="",$scope.usuarioEdicao.perfis=[],$http({url:"/api/v1/user/listarPerfis",method:"GET"}).then(function(result){$scope.usuarioEdicao.perfis=result.data.data,console.log($scope.usuarioEdicao.perfis)},function(err){console.log(err)})}function salvarEdicaoUsuario(){console.log($scope.usuarioEdicao),$http({url:"/api/v1/user/atualizarUsuario",method:"POST",data:{user:$scope.usuarioEdicao}}).then(function(result){return console.log(result),ConsultarUsuarios(),ngNotify.set(result.data.msg)},function(err){return ngNotify.set(err.data.msg)})}$scope.usuarios=[],$scope.usuarioEdicao={},InicializarUsuarioEdicao(),$scope.ConsultarUsuarios=ConsultarUsuarios,InicializaMenu(),ConsultarUsuarios(),$scope.Excluir=Excluir,$scope.Editar=Editar,$scope.salvarEdicaoUsuario=salvarEdicaoUsuario}angular.module("user").controller("visualizarUsuarioController",visualizarUsuarioController)}(angular);